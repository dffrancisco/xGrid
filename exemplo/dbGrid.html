<!DOCTYPE html>
<html>
  <head>
    <title>TODO supply a title</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../xGrid.css" rel="stylesheet" type="text/css"/>
    <script src="../../js/jquery-2.2.1.min.js" type="text/javascript"></script>
    <!--<script src="../superClass/dataSource/dataSource.js" type="text/javascript"></script>-->
    <link href="../../css/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <script src="../xGrid-2.0.js" type="text/javascript"></script>
    <!--<link href="../xGrid_mod1.css" rel="stylesheet" type="text/css"/>-->
    <link href="../olds/xGrid_mod1.css" rel="stylesheet" type="text/css"/>

    <style>
      #pnPrincipal{
        width: 600px;
        margin: 0 auto;
      }
      #pnPrincipal input{
        width: 120px;
      }
    </style>

  </head>
  <body>
    <div id="pnPrincipal">
      <div id="pnAAA">

      </div>
      <div id="pnBBB">
        <input type="text" name="name">
        <input type="text" name="old">
        <input type="text" name="cidade">
        <input type="text" name="qto">
      </div>


      Grid Simples
      <div id="gridSimples" style="margin-bottom: 10px" ></div>

      Grid Simples com css Style
      <div id="gridSimples2" style="margin-bottom: 10px"></div>

      Grid com Render
      <div id="pnGrid" style="margin-bottom: 10px"></div>

      Grid com compare
      <div id="pnGrid2" style="margin-bottom: 10px"></div>

      Grid com sideBySide
      <div id="pnGrid3" style="margin-bottom: 10px"></div>
      <div id="pnGrid3Edit">
        <input type="text" name="name">
        <input type="text" name="old">
        <input type="text" name="cidade">
        <input type="text" name="tel">
      </div>

      Grid com sideBySide render
      <div id="pnGrid4" style="margin-bottom: 10px"></div>
      <div id="pnGrid4Edit">
        <input type="text" name="name">
        <input type="text" name="old">
        <input type="text" name="cidade">
        <input type="text" name="tel">
      </div>

      Grid com sideBySide compare
      <div id="pnGrid5" style="margin-bottom: 10px"></div>
      <div id="pnGrid5Edit">
        <input type="text" name="name">
        <input type="text" name="old">
        <input type="text" name="cidade">
        <input type="text" name="tel">
      </div>

      Grid com campo extra
      <div id="pnGrid6" style="margin-bottom: 10px"></div>

      Grid com query
      <div id="pnGrid7" style="margin-bottom: 10px"></div>


    </div>


    <div id="dbGrid"></div>
    <div id="dadosGrid">
      <input type="hidden" name="id">
      <input type="text" name="qto">
      <input type="text" name="name">
      <input type="text" name="value">
      <input type="text" name="tel">
    </div>


    <br>
    <br>




    <br>
    <button onclick="grid.focus(0)">foco</button>
    <button onclick="grid.create(json)">Json</button>
    <button onclick="grid.insertLinha({name: 'muleque', value: '855', tel: 'adsf', qto: 2, tipo: true})">Insert2</button>
    <button onclick="grid.update(json2)">update</button>
    <button onclick="grid.dataSource('name', 'kkk')">ssss</button>

    <script>
      var json = [
        {name: 'Francisco', old: 37, tel: '999-999', qto: 7, cidade: 'Brasilia'},
        {name: 'Alves', old: 37, tel: '466-664', qto: 8, cidade: 'Taguatinga'},
        {name: 'Sousa', old: 22, tel: '858-999', qto: 21, cidade: 'Setor O'},
        {name: 'Kallebe', old: 16, tel: '888-345', qto: 98, cidade: 'Recando da Emas'},
        {name: 'Kalline', old: 11, tel: '787-995', qto: 11, cidade: 'Gura'},
        {name: 'Meire', old: 40, tel: '845-453', qto: 13, cidade: 'SIA'}
      ];

      function traduzQto(qto) {
        if (qto == 7) {
          return 'CARTAO';
        }
        if (qto == 8) {
          return 'DINHEIRO';
        }

        return qto;
      }


      var gridSimples = new xGrid({
        id: '#gridSimples',
        height: 92,
        columns: {
          'Nome': {dataField: 'name', width: '50%'},
          'Telefone': {dataField: 'tel', width: '20%'},
          'Qto': {dataField: 'qto', width: '15%'},
          'Cidade': {dataField: 'cidade', width: '15%'}
        },
        click:function(r){
          console.log('click');
        },
        dblClick: function (r) {
          console.log('dblClick', r);
        },
        enter: function (r) {
          console.log('enter', r);

        }
      });
      
      gridSimples.create(json);

      /*********************************************************************************/

      var gridSimples2 = new xGrid({
        id: '#gridSimples2',
        height: 92,
        columns: {
          'Nome': {dataField: 'name', width: '50%', style: 'text-align:center;color:#82CCD1'},
          'Telefone': {dataField: 'tel', width: '20%'},
          'Qto': {dataField: 'qto', width: '15%'},
          'Cidade': {dataField: 'cidade', width: '15%', style: 'text-align:right'}
        }
      });
      gridSimples2.create(json);

      /*********************************************************************************/
      /*********************************************************************************/

      function pnGridRende(value) {
        if (value > 11)
          return '<span style="color:#D12626">' + value + '<span>';
        else
          return value
      }

      var pnGrid = new xGrid({
        id: '#pnGrid',
        height: 92,
        columns: {
          'Nome': {dataField: 'name', width: '50%'},
          'Telefone': {dataField: 'tel', width: '20%'},
          'Qto': {dataField: 'qto', width: '15%', render: pnGridRende},
          'Cidade': {dataField: 'cidade', width: '15%'}
        }
      });
      pnGrid.create(json);

      /*********************************************************************************/
      /*********************************************************************************/

      var pnGrid2 = new xGrid({
        id: '#pnGrid2',
        height: 92,
        columns: {
          'Nome': {dataField: 'name', width: '50%', compare: 'old_qto'},
          'Telefone': {dataField: 'tel', width: '20%'},
          'Qto': {dataField: 'qto', width: '15%'},
          'Cidade': {dataField: 'cidade', width: '15%'}
        },
        compare: {
          old_qto: {
            dataField: ['qto', 'old', 'name'],
            call: function (r) {
              if (r.qto === 7 && r.old === 37)
                return '<span style="color:red">' + r.name + '<span>';
              else
                return r.name;
            }
          }
        }
      });
      pnGrid2.create(json);

      /*********************************************************************************/
      /*********************************************************************************/

      var pnGrid3 = new xGrid({
        id: '#pnGrid3',
        height: 92,
        columns: {
          'Nome': {dataField: 'name', width: '50%'},
          'Telefone': {dataField: 'tel', width: '20%'},
          'Qto': {dataField: 'qto', width: '15%'},
          'Cidade': {dataField: 'cidade', width: '15%'}
        },
        sideBySide: {
          id: '#pnGrid3Edit'
        }
      });
      pnGrid3.create(json);

      /*********************************************************************************/
      /*********************************************************************************/
      function pnGrid4Rende(value) {
        if (value === '466-664')
          return '(' + value + ')';
        else
          return value;
      }

      var pnGrid4 = new xGrid({
        id: '#pnGrid4',
        height: 92,
        columns: {
          'Nome': {dataField: 'name', width: '50%'},
          'Telefone': {dataField: 'tel', width: '20%'},
          'Qto': {dataField: 'qto', width: '15%'},
          'Cidade': {dataField: 'cidade', width: '15%'}
        },
        sideBySide: {
          id: '#pnGrid4Edit',
          fields: {
            tel: {render: pnGrid4Rende}
          }
        }
      });
      pnGrid4.create(json);

      /*********************************************************************************/
      /*********************************************************************************/
      var pnGrid5 = new xGrid({
        id: '#pnGrid5',
        height: 92,
        columns: {
          'Nome': {dataField: 'name', width: '50%'},
          'Telefone': {dataField: 'tel', width: '20%'},
          'Qto': {dataField: 'qto', width: '15%'},
          'Cidade': {dataField: 'cidade', width: '15%'}
        },
        sideBySide: {
          id: '#pnGrid5Edit',
          fields: {
            tel: {compare: 'myCompare'}
          },
          compare: {
            myCompare: {
              dataField: ['qto', 'old', 'tel'],
              call: function (r) {
                if (r.qto === 21 && r.old === 22)
                  return '*' + r.tel + '*';
                else
                  return r.tel;
              }
            }
          }
        }
      });
      pnGrid5.create(json);

      /*********************************************************************************/
      /*********************************************************************************/
      var pnGrid6 = new xGrid({
        id: '#pnGrid6',
        height: 92,
        columns: {
          'Nome': {dataField: 'name', width: '40%'},
          'Telefone': {dataField: 'tel', width: '15%'},
          'Qto': {dataField: 'qto', width: '15%'},
          'Cidade': {dataField: 'cidade', width: '15%'},
          'Soma': {dataField: 'soma', width: '15%', compare: 'soma'}
        },
        compare: {
          soma: {
            dataField: ['qto', 'old'],
            call: function (r) {
              return r.qto * r.old;
            }
          }
        }
      });
      pnGrid6.create(json);

      /*********************************************************************************/
      /*********************************************************************************/

      $.ajaxSetup({
        url: 'data.php',
        type: 'POST',
        dataType: 'json'
      });

      var pnGrid7 = new xGrid({
        id: '#pnGrid7',
        theme: 'x-mod1',
        heightLine:18,
        height: 100,
        columns: {
          'N Fabricante': {dataField: 'NUM_FABRICANTE', width: '15%'},
          'Descricao': {dataField: 'DESC_PRODUTO', width: '55%'},
          'Qto': {dataField: 'QUANTIDADE', width: '15%'},
          'Valor': {dataField: 'VENDA', width: '15%'}
        },
        query: {
          param: {
            maxItem: 100
          }
          //parametro opcionais
        }
      });
      //   pnGrid7.create();// opcional - > mostra a grid vazia
      pnGrid7.create();
      pnGrid7.load();
      pnGrid7.search({NUM_FABRICANTE: '0160%', DESC: 'FAROL%'});

      /*********************************************************************************/



      function testeRende(value) {
        return value + ' ' + 1;
      }

      function colorRed(value) {
        return '<span style="color:#D12626">' + value + '<span>';
      }

      var grid = new xGrid({
        id: "#dbGrid",
        height: 200,
        width: 300,
        //                theme: 'x-blue',
        //        lineFocus: 0,
        columns: {
          'Nome': {dataField: 'name', width: '50%', render: colorRed},
          'Telefone': {dataField: 'tel', width: '20%', style: 'text-align:center;color:#82CCD1'},
          'Qto': {dataField: 'qto', width: '15%', compare: 'val', style: 'text-align:right'},
          'tipo': {dataField: 'tipo', width: '15%'}
        },
//                sideBySide: {
//                    id: '#dadosGrid',
//                    fields: {
//                        tel: {render: testeRende},
//                        qto: {compare: 'testeCompare'}
//                    },
//                    compare: {
//                        testeCompare: {
//                            dataField: ['qto', 'tel'],
//                            call: function (r) {
//                                return r.qto + r.tel;
//                            }
//                        }
//                    }
//                }
      });

      grid.create(json);




      //,
      //        compare: {
      //          val: {
      //            dataField: ['qto', 'tipo'],
      //            call: function (r) {
      //              if (r.tipo)
      //                return '<span style="color:#D12626">' + r.qto + '<span>';
      //              else
      //                return r.qto;
      //            }
      //          }
      //        },
      //        onSelectLine: function (db) {
      //          console.log(db.name, db.tel);
      //          //console.log(grid.dataSource().name);
      //          $('#dadosGrid').getDataSource(grid.dataSource());
      //        }

    </script>
  </body>
</html>
